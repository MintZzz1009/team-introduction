<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script>
      $(document).ready(function () {
        show_comment();
      });
      function save_comment() {
        let name = $("#name").val();
        let comment = $("#comment").val();
        $.ajax({
          type: "POST",
          url: "/test",
          data: { name_give: name, comment_give: comment },
          success: function (response) {
            alert(response["msg"]);
            window.location.reload();
          },
        });
      }
      function show_comment() {
        $.ajax({
          type: "GET",
          url: "/test",
          data: {},
          success: function (response) {
            console.log("ëŒ“ê¸€ëª©ë¡ì¡°íšŒ", response["tests"]);
            let rows = response["tests"];
            for (let i = 0; i < rows.length; i++) {
              let name = rows[i]["name"];
              let comment = rows[i]["comment"];
              let num1 = rows[i]["num1"];
              let num2 = rows[i]["num2"];
              let num3 = rows[i]["num3"];
              console.log(typeof num1);
              console.log(num1);
              let temp_html = `<li class="card" id="li-${num1}-${num2}-${num3}">
            <div class="card-body">
              <blockquote class="blockquote mb-0">
                <p>${comment}</p>
                <footer class="from-who">${name}</footer>
              </blockquote>
            </div>
            <div class="comment-buttons">
              <button
                onclick="addInput(${num1}, ${num2}, ${num3})"
                type="button"
                class="btn btn-outline-primary"
              >
                ìˆ˜ì •
              </button>
              <button
                onclick="remove(${num1}, ${num2}, ${num3})"
                type="button"
                class="btn btn-outline-primary"
              >
                ì‚­ì œ
              </button>
            </div>
          </li>`;
              $("#comment_list").append(temp_html);
            }
          },
        });
      }
      // ìˆ˜ì •ì„ ìœ„í•œ inputì°½ ì—´ê¸°
      function addInput(num1, num2, num3) {
        console.log(num1);
        let li = $(`#li-${num1}-${num2}-${num3}`);
        console.log(li);
        let wanna_edit = $(`#li-${num1}-${num2}-${num3} p`).text();
        console.log(wanna_edit);
        li.empty();
        li.append($("<input/>", { type: "text", value: wanna_edit }));
        li.append($("<button >ìˆ˜ì •ì™„ë£Œ!</button>"));
        $(`#li-${num1}-${num2}-${num3} > button`).click(function () {
          save(num1, num2, num3);
        });
      }
      // ìˆ˜ì •ì™„ë£Œ! ë²„íŠ¼ í´ë¦­ì‹œ ì´ë²¤íŠ¸ë¦¬ìŠ¤ë„ˆ
      function save(num1, num2, num3) {
        let edit_done = $(
          `#li-${num1}-${num2}-${num3} > input[type=text]`
        ).val();
        console.log(num1, edit_done);
        $.ajax({
          type: "POST",
          url: "/test/edit",
          data: {
            edit_give: edit_done,
            num1_give: num1,
            num2_give: num2,
            num3_give: num3,
          },
          success: function (response) {
            alert(response["msg"]);
            window.location.reload();
          },
        });
      }
      function remove(num1, num2, num3) {
        $.ajax({
          type: "POST",
          url: "/test/remove",
          data: { num1_give: num1, num2_give: num2, num3_give: num3 },
          success: function (response) {
            alert(response["msg"]);
            window.location.reload();
          },
        });
      }
    </script>
    <script>
      function getWeather() {
        let city = document.getElementById("city").value;
        fetch("https://goweather.herokuapp.com/weather/" + city)
          .then((response) => response.json())
          .then((data) => {
            (document.getElementById("temp").innerHTML = data["temperature"]),
              (document.getElementById("desc").innerHTML = data["description"]);
          });
      }
    </script>
    <script
      src="https://kit.fontawesome.com/ec13307674.js"
      crossorigin="anonymous"
    ></script>
    <title>ì½”ë”©í•˜ê³ ì‹­ì¡°</title>
    <link rel="stylesheet" href="../static/css/team.css" />
  </head>
  <body>
    <main>
      <header>
        <div class="team__header__icons">
          <img src="../static/img/i-love-coding-badge-400x400.png" />

        </div>
      </header>
      <div class="team__contents">
        <div class="team__contents-column">
          <div class="team__introduction">
            <h1>ì½”ë”©í•˜ê³ ì‹­ì¡°</h1>
            <p>
              ì €í¬ëŠ” ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œ ì „ ì„¸ê³„ ë‚˜ë¼ë“¤ì„ ê²€ìƒ‰í•´
              <span>ë‚ ì”¨</span>ë¥¼ í™•ì¸í•  ìˆ˜ ìˆê³  ì‘ì„±ìì˜ ì´ë¦„ê³¼ ê¸€ í•œ ì¤„ë¡œ
              <span>ë°©ëª…ë¡</span>ì„ ë‚¨ê¸¸ ìˆ˜ ìˆìœ¼ë©°
              <span>ê° íŒ€ì›ë“¤ì˜ í”„ë¡œí•„</span>ì„ ëˆ„ë¥´ë©´ ì •í™•í•œ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜
              ìˆëŠ” í˜ì´ì§€ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤
            </p>
            <p>
              íŒ€ í”„ë¡œì íŠ¸ë¥¼ í•˜ë©´ì„œ ì—­í• ì„ ë‚˜ëˆ„ê¸´ í–ˆì—ˆì§€ë§Œ ì²«
              <span>í˜‘ì—…</span> í”„ë¡œì íŠ¸ì´ë‹¤ ë³´ë‹ˆ ëª¨ë¥´ëŠ” ë¶€ë¶„ì„ ê±°ì˜ ê°™ì´
              ê³ ë¯¼í•˜ê³  í•´ê²°í•˜ë©° ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤
            </p>
            <p>
              ì €í¬ íŒ€ì˜ <span>ê¶ê·¹ì ì¸ ëª©í‘œ</span>ëŠ” ì™„ë²½í•œ ê²°ê³¼ë¬¼ë³´ë‹¨ íŒ€ì›ë“¤ê³¼
              í˜‘ì—…í•˜ëŠ” ë°©ë²•ì„ ê¹¨ìš°ì¹˜ê³  ê°œê°œì¸ì˜ ë¶€ì¡±í•œ ì ì„ ì •í™•íˆ ê¹¨ë‹¬ìœ¼ë©°
              ê³µë¶€ì˜ ë°©í–¥ì„±ì„ í™•ì‹¤í•˜ê²Œ ì¡ëŠ” ê²Œ ì €í¬ì˜ ëª©í‘œì…ë‹ˆë‹¤
            </p>
          </div>
          <div class="team__members">
            <a href="/templates/gimin.html" class="team__members__avatar"></a>
            <a
              href="/templates/beomseok.html"
              class="team__members__avatar"
            ></a>
            <a
              href="/templates/seungjun.html"
              class="team__members__avatar"
            ></a>
            <a href="/templates/haksoo.html" class="team__members__avatar"></a>
          </div>
        </div>
        <div class="team__contents-column">
          <div class="team__weather">
            <h4>ì„¸ê³„ ë„ì‹œ ë‚ ì”¨</h4>
            <div class="team__weather__world">
              <div class="team__weather__world__search">
                <input id="city" type="text" value="" list="depList" />
                <datalist id="depList">
                  <option value="seoul"></option>
                  <option value="London"></option>
                  <option value="algiers"></option>
                  <option value="Luanda"></option>
                  <option value="NewDelhi"></option>
                  <option value="Manila"></option>
                  <option value="moscow"></option>
                  <option value="bangkok"></option>
                  <option value="ankara"></option>
                  <option value="hanoi"></option>
                  <option value="paris"></option>
                  <option value="berlin"></option>
                  <option value="rome"></option>
                  <option value="athens"></option>
                  <option value="amsterdam"></option>
                  <option value="oslo"></option>
                  <option value="lisbon"></option>
                  <option value="canberra"></option>
                  <option value="brasilia"></option>
                  <option value="paramaribo"></option>
                  <option value="montevideo"></option>
                  <option value="mexico city"></option>
                </datalist>
                <button onclick="getWeather()">
                  <i class="fa-solid fa-magnifying-glass"></i>
                </button>
              </div>
              <div class="team__weather__world__output">
                <h6 id="desc"></h6>
                <h6 id="temp"></h6>
              </div>
            </div>
          </div>
          <div class="team__promise">
            <h3>Promise</h3>
            <p>ğŸ¤™ ì‹œê°„ ì•½ì† ì˜ ì§€í‚¤ê¸°</p>
            <p>ğŸ¤™ ìë¦¬ë¥¼ ë¹„ìš¸ ì‹œ ë¯¸ë¦¬ ë§í•´ì£¼ê¸°</p>
            <p>ğŸ¤™ ì ê·¹ì ìœ¼ë¡œ í”„ë¡œì íŠ¸ì— ì°¸ì—¬í•˜ê¸°</p>
            <p>ğŸ¤™ ìƒëŒ€ë°©ì´ ëª¨ë¥´ëŠ” ë¶€ë¶„ì€ ì˜ ì•Œë ¤ì£¼ê¸°</p>
            <p>ğŸ¤™ ë¬¸ì œê°€ ìˆëŠ” ë¶€ë¶„ì€ ê³µìœ í•˜ê¸°</p>
          </div>
        </div>
      </div>
      <div class="team__comments">
        <div class="mypost">
          <div class="form-floating mb-3">
            <input
              type="text"
              class="form-control"
              id="name"
              placeholder="url"
            />
            <label for="floatingInput">ë‹‰ë„¤ì„</label>
          </div>
          <div class="form-floating">
            <textarea
              class="form-control"
              placeholder="Leave a comment here"
              id="comment"
              style="height: 100px"
            ></textarea>
            <label for="floatingTextarea2">ëŒ“ê¸€ ë‚¨ê¸°ê¸°</label>
          </div>
          <button onclick="save_comment()" type="button" class="btn btn-dark">
            ëŒ“ê¸€ ë‚¨ê¸°ê¸°
          </button>
        </div>
        <div id="comment_list">

        </div>
      </div>
    </main>
  </body>
</html>